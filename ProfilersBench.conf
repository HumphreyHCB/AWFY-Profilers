# this run definition will be chosen if no parameters are given to rebench
default_experiment: Perf-Experiment
default_data_file: 'example.data'

# a set of suites with different benchmarks and possibly different settings
benchmark_suites:
    asyncTests:
        gauge_adapter: RebenchLog
        command: " -agentpath:/home/hburchell/Repos/AWFY-Profilers/Profilers/Async/build/libasyncProfiler.so=start,event=cpu,interval=10,file=/home/hburchell/Repos/AWFY-Profilers/ProfilesDump/AsyncDumps/rebench_test_Async_%(benchmark)s.txt -cp benchmarks.jar Harness %(benchmark)s 1000 "
        location: AWFY/benchmarks/Java
        benchmarks: &BENCHMARKS
        - DeltaBlue:
                extra_args: 1000
        - Richards:
                extra_args: 1000
        - Json:
                extra_args: 1000
        - CD:
                extra_args: 1000                
        - Havlak:
                extra_args: 15000              
        - Bounce:
                extra_args: 1000                
        - List:
                extra_args: 1000
        - Mandelbrot:
                extra_args: 500                
        - NBody:
                extra_args: 250000               
        - Permute:
                extra_args: 1000               
        - Queens:
                extra_args: 1000        
        - Sieve:
                extra_args: 1000               
        - Storage:
                extra_args: 1000              
        - Towers:
                extra_args: 1000
    JavaFlightRecorderTests:
        gauge_adapter: RebenchLog
        command: " -XX:StartFlightRecording=settings=profile,filename=/home/hburchell/Repos/AWFY-Profilers/ProfilesDump/JavaFlightRecorder/JavaFlightRecorder_%(benchmark)s.jfr -cp benchmarks.jar Harness %(benchmark)s 1000 "
        location: AWFY/benchmarks/Java
        benchmarks: *BENCHMARKS 

    YourKitTests:
        gauge_adapter: RebenchLog
        command: " -agentpath:/home/hburchell/Repos/AWFY-Profilers/Profilers/YourKit/libyjpagent.so=onexit=snapshot,dir=/home/hburchell/Repos/AWFY-Profilers/ProfilesDump/YourKit,async_sampling_cpu,sessionname=%(benchmark)s -cp benchmarks.jar Harness %(benchmark)s 1000 "
        location: AWFY/benchmarks/Java
        benchmarks: *BENCHMARKS
    
    PerfTests:
        gauge_adapter: RebenchLog
        command: " record -o /home/hburchell/Repos/AWFY-Profilers/ProfilesDump/Perf/%(benchmark)s.data -- java -XX:+UnlockDiagnosticVMOptions -XX:+DumpPerfMapAtExit -cp benchmarks.jar Harness %(benchmark)s 1000 "
        location: AWFY/benchmarks/Java
        benchmarks: *BENCHMARKS         

    UberTests:
        gauge_adapter: RebenchLog
        command: " -javaagent:/home/hburchell/Repos/AWFY-Profilers/Profilers/jvm-profiler/target/jvm-profiler-1.0.0.jar=reporter=com.uber.profiling.reporters.FileOutputReporter,outputDir=/home/hburchell/Repos/AWFY-Profilers/ProfilesDump/Uber/%(benchmark)s,tag=%(benchmark)s,metricInterval=50,sampleInterval=50 -cp benchmarks.jar Harness %(benchmark)s 1000 "
        location: AWFY/benchmarks/Java
        benchmarks: *BENCHMARKS         

    honest-profilerTests:
        gauge_adapter: RebenchLog
        command: " -agentpath:/home/hburchell/Repos/AWFY-Profilers/Profilers/honest-profiler/liblagent.so=interval=5,logPath=/home/hburchell/Repos/AWFY-Profilers/ProfilesDump/HonestProfiler/%(benchmark)s.hpl -cp benchmarks/Java/benchmarks.jar -cp benchmarks.jar Harness %(benchmark)s 1000 "
        location: AWFY/benchmarks/Java
        benchmarks: *BENCHMARKS

    JProfilerTests:
        gauge_adapter: RebenchLog
        command: " -agentpath:/home/hburchell/jprofiler13/bin/linux-x64/libjprofilerti.so=offline,id=120,config=/home/hburchell/Repos/AWFY-Profilers/Profilers/JProfiler/jprofiler_config.xml -cp benchmarks.jar Harness %(benchmark)s 1000 "
        location: AWFY/benchmarks/Java
        benchmarks: *BENCHMARKS            

executors:
    Java8U66:
      path: AWFY/implementations/
      executable: java8.sh
    Perf:
      path: AWFY/implementations/
      executable: perf.sh

experiments:
    async-Experiment:
      suites:  [asyncTests]
      executions: [Java8U66]
    JFR-Experiment:
      suites:  [JavaFlightRecorderTests]
      executions: [Java8U66]
    YourKit-Experiment:
      suites:  [YourKitTests]
      executions: [Java8U66]
    Perf-Experiment:
      suites:  [PerfTests]
      executions: [Perf]
    Uber-Experiment:
        suites: [UberTests]
        executions: [Java8U66]
    honest-profiler-Experiment:
        suites: [honest-profilerTests]
        executions: [Java8U66]
    JProfiler-Experiment:
        suites: [JProfilerTests]
        executions: [Java8U66]